// Pine Script v5
// Optimized for AI-driven, dynamic signal delivery to webhook server
// [2025-05-18] - Initial agent-optimized version

//@version=5
strategy("AI-Ready Webhook Strategy", overlay=true, default_qty_type=strategy.percent_of_equity, default_qty_value=10)

// === INPUTS ===
longCondition = ta.crossover(ta.sma(close, 14), ta.sma(close, 28))
shortCondition = ta.crossunder(ta.sma(close, 14), ta.sma(close, 28))

// === SIGNAL DATA ===
signal_data = {
    "symbol": syminfo.ticker,
    "time": str.tostring(time),
    "price": str.tostring(close),
    "volume": str.tostring(volume),
    "rsi": str.tostring(ta.rsi(close, 14)),
    "macd": str.tostring(ta.macd(close, 12, 26, 9)[0]),
    "macd_signal": str.tostring(ta.macd(close, 12, 26, 9)[1]),
    "macd_hist": str.tostring(ta.macd(close, 12, 26, 9)[2]),
    "sma14": str.tostring(ta.sma(close, 14)),
    "sma28": str.tostring(ta.sma(close, 28)),
    "custom_param": input.string("", title="Custom Param")
}

// === WEBHOOK PAYLOAD ===
var string webhook_url = input.string("https://your-webhook-server/api/webhook", title="Webhook URL")

if longCondition
    strategy.entry("Long", strategy.long)
    alert(message = json.stringify(signal_data), freq = alert.freq_once_per_bar_close)
if shortCondition
    strategy.entry("Short", strategy.short)
    alert(message = json.stringify(signal_data), freq = alert.freq_once_per_bar_close)

// === VISUALS ===
plot(ta.sma(close, 14), color=color.green)
plot(ta.sma(close, 28), color=color.red)
